@model List<GenLibrary.Dtos.DetailedBookDto>

@* Views/Shared/_BookTable.cshtml *@

<table id="booksTable" class="table table-striped table-bordered" style="width:100%">
    <thead>
        <tr>
            <th>Book Id</th>
            <th>Title</th>
            <th>ISBN</th>
            <th>Authors</th>
            <th>Total Copies</th>
            <th>Available Copies</th>
            <th>Published</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var book in Model)
        {
            <tr>
                <td>@book.BookId</td>
                <td>@book.Title</td>
                <td>@book.ISBN</td>
                <td>@book.Authors</td>
                <td>@book.TotalCopies</td>
                <td class="@(book.AvailableCopies > 0 ? "text-success fw-bold" : "text-danger fw-bold")">
                    @book.AvailableCopies
                </td>
                <td>@book.PublishedYear</td>
                <td>
                    <a href="@Url.Action("Copies", "Books", new { bookId = book.BookId, title = book.Title })" class="btn btn-primary btn-sm">
                        <i class="bi bi-eye"></i> View Copies
                    </a>
                    @if (User.IsInRole("Member") && book.AvailableCopies > 0)
                    {
                        <a href="@Url.Action("Checkout", "Member", new { bookId = book.BookId })" class="btn btn-success btn-sm">
                            <i class="bi bi-cart-plus"></i> Checkout
                        </a>
                    }
                    @if (User.IsInRole("Librarian") && book.AvailableCopies > 0)
                    {
                        <a href="@Url.Action("CheckoutBook", "Librarian", new { bookId = book.BookId })" class="btn btn-success btn-sm">
                            <i class="bi bi-box-arrow-right"></i> Checkout
                        </a>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
